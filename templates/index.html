{% extends 'base.html' %}
{% block content %}
{% load static %}
<main id="main-content">
    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="hero-content">
                <h1><span class="highlight">Build</span> Kit</h1>
                <p>Home of Quality Building Materials</p>
                <div class="hero-buttons">
                    <a href="#about" class="btn btn-primary">Our History</a>
                    <a href="{% url 'store:product_list' %}" class="btn btn-outline-primary">Buy from us</a>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section about-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-5">
                    <img src="https://themes.g5plus.net/darna/wp-content/uploads/2015/07/about.jpg" alt="About Build Kit" class="img-fluid">
                </div>
                <div class="col-md-7">
                    <div class="about-text">
                        <div class="section-header text-start">
                            <h2>Who We Are</h2>
                            <p>Welcome to Build Kit</p>
                        </div>
                        <p>We specialize in supplying high-quality building and construction materials to meet the needs of contractors, builders, and individuals. From foundation to finishing, we provide durable and affordable products including cement, iron rods, roofing sheets, tiles, paints, plumbing supplies, electrical fittings, and more.</p>
                        <a href="#" class="btn btn-primary">Our History</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Process Section -->
    <section class="section process-section">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <div class="process-item">
                        <h3>01 <i class="fa fa-long-arrow-right"></i></h3>
                        <h4><a href="#">Planning</a></h4>
                        <p>We start with detailed planning to understand your construction needs and provide the best material solutions.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="process-item">
                        <h3>02 <i class="fa fa-long-arrow-right"></i></h3>
                        <h4><a href="#">Sourcing</a></h4>
                        <p>Our team sources only the highest quality materials from trusted suppliers and manufacturers.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="process-item">
                        <h3>03 <i class="fa fa-long-arrow-right"></i></h3>
                        <h4><a href="">Supply</a></h4>
                        <p>We ensure timely delivery of materials to your construction site, maintaining quality standards.</p>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="process-item">
                        <h3>04</h3>
                        <h4><a href="#">Support</a></h4>
                        <p>Our support continues after delivery with technical assistance and ongoing customer service.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

<!-- Services Section -->
<section id="services" class="section services-section">
    <div class="container">
        <div class="section-header">
            <h2>What We Offer</h2>
            <p>Always Dedicated and Devoted</p>
        </div>
<div class="row">
    {% for category in featured_categories %}
        <div class="col-md-4 mb-4">
            {% if category.slug %}
                <a href="{% url 'store:product_list_by_category' category.slug %}" 
                   class="text-decoration-none">
            {% endif %}
            
            <div class="service-box card h-100 shadow-sm hover-shadow transition-all {% if category.slug %}clickable-card{% endif %}">
                <div class="card-body text-center p-4">
                    <!-- Dynamic Icon -->
                    <div class="icon-wrapper mb-3">
                        <i class="{{ category.icon_class|default:'fas fa-tools' }} fa-3x text-{{ category.color_class|default:'primary' }}"></i>
                    </div>
                    
                    <!-- Category Name -->
                    <h5 class="card-title mb-3 text-dark {% if category.slug %}hover-text-primary{% endif %}">
                        {{ category.name }}
                    </h5>
                    
                    <!-- Category Description -->
                    <p class="card-text text-muted mb-3">
                        {{ category.description|default:"High-quality products and materials for your construction needs."|truncatewords:15 }}
                    </p>
                    
                    <!-- Product Count Badge -->
                    {% if category.product_count %}
                        <div class="mt-auto">
                            <span class="badge bg-{{ category.color_class|default:'primary' }} rounded-pill">
                                {{ category.product_count }} product{{ category.product_count|pluralize }}
                            </span>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            {% if category.slug %}
                </a>
            {% endif %}
        </div>
    {% empty %}
        <!-- Enhanced Fallback -->
        <div class="col-12 text-center py-5">
            <div class="empty-state">
                <i class="fas fa-inbox fa-4x text-muted mb-3"></i>
                <h4 class="text-muted">No Categories Available</h4>
                <p class="text-muted">Categories will appear here once they are added to the system.</p>
                <a href="{% url 'admin:index' %}" class="btn btn-primary mt-2">
                    <i class="fas fa-cog me-1"></i> Manage Categories
                </a>
            </div>
        </div>
    {% endfor %}
</div>
{% if featured_categories %}
    <div class="text-center mt-5">
        <a href="{% url 'store:product_list' %}" class="btn btn-primary btn-lg px-5">
            <i class="fas fa-th-large me-2"></i>View All Categories
        </a>
    </div>
{% endif %}
</section>


    <!-- Testimonials Section -->
    <section id="testimonials" class="section testimonials-section">
        <div class="container">
            <div class="section-header">
                <h2>What Our Clients Say</h2>
                <p>Hear from Our Satisfied Customers</p>
            </div>
            <div class="row">
                {% for testimonial in testimonials %}
                    <div class="col-md-4 mb-4">
                        <div class="testimonial-card fade-in-up">
                            <div class="testimonial-text">"{{ testimonial.content }}"</div>
                            <div class="testimonial-author">
                                <div class="author-info">
                                    <h6>{{ testimonial.reviewer_name }}</h6>
                                    <span>Rating: {{ testimonial.rating }}/5</span>
                                    {% if testimonial.product %}
                                    <p><em>Reviewing {{ testimonial.product.name }}</em></p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="col-12 text-center">
                        <p class="text-muted">No testimonials available at the moment.</p>
                    </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section contact-section">
        <div class="container">
            <div class="section-header">
                <h2>Contact Us</h2>
                <p>Get in Touch for Your Construction Needs</p>
            </div>
            <div class="row">
                <div class="col-md-8 mx-auto">
                    <form id="contactForm">
                        <div class="mb-3">
                            <label for="name" class="form-label">Name *</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone">
                        </div>
                        <div class="mb-3">
                            <label for="message" class="form-label">Message *</label>
                            <textarea class="form-control" id="message" rows="5" required placeholder="Tell us about your project or inquiry..."></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg w-100">
                            <i class="fab fa-whatsapp me-2"></i>Send via WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>
</main>

<script>
    document.getElementById('contactForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;
        const message = document.getElementById('message').value;
        
        const whatsappMessage = `New Inquiry from Build Kit Website:\n\nName: ${name}\nEmail: ${email}\nPhone: ${phone || 'Not provided'}\nMessage: ${message}`;
        const phoneNumber = "+233544542606"; // Replace with your WhatsApp number
        const whatsappURL = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(whatsappMessage)}`;
        
        window.open(whatsappURL, '_blank');
        
      
        this.reset();
    });
</script>
{% endblock %}